{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://api.maas.global/maas-backend/itineraries/itinerary-list/response",
  "description": "Response schema for itineraries-list",
  "type": "object",
  "properties": {
    "itineraries": {
      "type": "array",
      "minItems": 0,
      "items": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "id": "https://api.maas.global/core/itinerary",
        "description": "OpenTripPlanner itinerary, augmented with leg bookings per leg",
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "signature": {
                "type": "string"
              },
              "state": {
                "type": "string",
                "enum": [
                  "START",
                  "PLANNED",
                  "PAID",
                  "ACTIVATED",
                  "CANCELLED",
                  "CANCELLED_WITH_ERRORS",
                  "FINISHED"
                ]
              },
              "startTime": {
                "type": "integer",
                "maximum": 9007199254740991,
                "minimum": 1451606400
              },
              "endTime": {
                "type": "integer",
                "maximum": 9007199254740991,
                "minimum": 1451606400
              },
              "fare": {
                "type": "object",
                "properties": {
                  "co2": {
                    "type": "number"
                  },
                  "points": {
                    "anyOf": [
                      {
                        "type": "number"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "required": [
                  "co2",
                  "points"
                ]
              },
              "legs": {
                "type": "array",
                "minItems": 0,
                "items": [
                  {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "signature": {
                            "type": "string"
                          },
                          "state": {
                            "type": "string",
                            "enum": [
                              "START",
                              "PLANNED",
                              "PAID",
                              "ACTIVATED",
                              "CANCELLED",
                              "CANCELLED_WITH_ERRORS",
                              "FINISHED"
                            ]
                          },
                          "from": {
                            "type": "object",
                            "additionalProperties": true,
                            "allOf": [
                              {
                                "type": "object",
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "lat": {
                                        "type": "number",
                                        "minimum": -90,
                                        "maximum": 90
                                      },
                                      "lon": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                      }
                                    }
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "name": {
                                        "type": "string"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "stopId": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "stopCode": {
                                    "type": "string",
                                    "minLength": 1
                                  }
                                }
                              }
                            ],
                            "required": [
                              "lat",
                              "lon"
                            ]
                          },
                          "to": {
                            "type": "object",
                            "additionalProperties": true,
                            "allOf": [
                              {
                                "type": "object",
                                "allOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "lat": {
                                        "type": "number",
                                        "minimum": -90,
                                        "maximum": 90
                                      },
                                      "lon": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                      }
                                    }
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "name": {
                                        "type": "string"
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "stopId": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "stopCode": {
                                    "type": "string",
                                    "minLength": 1
                                  }
                                }
                              }
                            ],
                            "required": [
                              "lat",
                              "lon"
                            ]
                          },
                          "startTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "endTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "mode": {
                            "anyOf": [
                              {
                                "description": "A mode that involves using your personal vehicle or legs",
                                "type": "string",
                                "enum": [
                                  "WALK",
                                  "BICYCLE",
                                  "CAR"
                                ]
                              },
                              {
                                "description": "A mode that involves transit with fixed schedules",
                                "type": "string",
                                "enum": [
                                  "TRAM",
                                  "SUBWAY",
                                  "RAIL",
                                  "BUS",
                                  "FERRY",
                                  "TRANSIT",
                                  "TRAIN",
                                  "AEROPLANE"
                                ]
                              },
                              {
                                "description": "A mode that is available on-demand for your personal use",
                                "type": "string",
                                "enum": [
                                  "CAR",
                                  "TAXI",
                                  "CABLE_CAR",
                                  "GONDOLA",
                                  "FUNICULAR",
                                  "BUSISH",
                                  "TRAINISH"
                                ]
                              }
                            ]
                          },
                          "departureDelay": {
                            "type": "integer",
                            "minimum": 0
                          },
                          "arrivalDelay": {
                            "type": "integer",
                            "minimum": 0
                          },
                          "distance": {
                            "type": "number",
                            "minimum": 0
                          },
                          "route": {
                            "type": "string",
                            "minLength": 1
                          },
                          "routeShortName": {
                            "type": "string",
                            "minLength": 1
                          },
                          "routeLongName": {
                            "type": "string",
                            "minLength": 1
                          },
                          "agencyId": {
                            "type": "string",
                            "minLength": 2
                          },
                          "legGeometry": {
                            "type": "object",
                            "description": "Google encoded polyline, see: https://developers.google.com/maps/documentation/utilities/polylinealgorithm",
                            "properties": {
                              "points": {
                                "type": "string",
                                "minLength": 3,
                                "pattern": "^([\\x5F-\\x7E]*[\\x3F-\\x5E])+$"
                              }
                            },
                            "required": [
                              "points"
                            ]
                          }
                        },
                        "required": [
                          "from",
                          "to",
                          "mode",
                          "startTime",
                          "endTime",
                          "legGeometry"
                        ],
                        "additionalProperties": true
                      },
                      {
                        "type": "object",
                        "additionalProperties": true,
                        "properties": {
                          "startTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "endTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "mode": {
                            "description": "A mode that only involves waiting in the current location",
                            "type": "string",
                            "enum": [
                              "WAIT"
                            ]
                          }
                        },
                        "required": [
                          "mode",
                          "startTime",
                          "endTime"
                        ]
                      },
                      {
                        "type": "object",
                        "additionalProperties": true,
                        "properties": {
                          "startTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "endTime": {
                            "type": "integer",
                            "maximum": 9007199254740991,
                            "minimum": 1451606400
                          },
                          "mode": {
                            "description": "A mode that involves changing transports",
                            "type": "string",
                            "enum": [
                              "TRANSFER",
                              "LEG_SWITCH"
                            ]
                          }
                        },
                        "required": [
                          "mode",
                          "startTime",
                          "endTime"
                        ]
                      }
                    ]
                  }
                ]
              }
            },
            "required": [
              "startTime",
              "endTime",
              "legs"
            ]
          }
        ],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"
          },
          "customer": {
            "type": "string",
            "pattern": "^[aepus]{2}-[\\w]{4}-\\d:[a-f\\d]{8}(-[a-f\\d]{4}){3}-[a-f\\d]{12}$"
          },
          "legs": {
            "type": "array",
            "minItems": 0,
            "items": {
              "properties": {
                "id": {
                  "type": "string",
                  "pattern": "^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"
                }
              },
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "signature": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string",
                      "enum": [
                        "START",
                        "PLANNED",
                        "PAID",
                        "ACTIVATED",
                        "CANCELLED",
                        "CANCELLED_WITH_ERRORS",
                        "FINISHED"
                      ]
                    },
                    "from": {
                      "type": "object",
                      "additionalProperties": true,
                      "allOf": [
                        {
                          "type": "object",
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "lat": {
                                  "type": "number",
                                  "minimum": -90,
                                  "maximum": 90
                                },
                                "lon": {
                                  "type": "number",
                                  "minimum": -180,
                                  "maximum": 180
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "stopId": {
                              "type": "string",
                              "minLength": 1
                            },
                            "stopCode": {
                              "type": "string",
                              "minLength": 1
                            }
                          }
                        }
                      ],
                      "required": [
                        "lat",
                        "lon"
                      ]
                    },
                    "to": {
                      "type": "object",
                      "additionalProperties": true,
                      "allOf": [
                        {
                          "type": "object",
                          "allOf": [
                            {
                              "type": "object",
                              "properties": {
                                "lat": {
                                  "type": "number",
                                  "minimum": -90,
                                  "maximum": 90
                                },
                                "lon": {
                                  "type": "number",
                                  "minimum": -180,
                                  "maximum": 180
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "stopId": {
                              "type": "string",
                              "minLength": 1
                            },
                            "stopCode": {
                              "type": "string",
                              "minLength": 1
                            }
                          }
                        }
                      ],
                      "required": [
                        "lat",
                        "lon"
                      ]
                    },
                    "startTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "endTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "mode": {
                      "anyOf": [
                        {
                          "description": "A mode that involves using your personal vehicle or legs",
                          "type": "string",
                          "enum": [
                            "WALK",
                            "BICYCLE",
                            "CAR"
                          ]
                        },
                        {
                          "description": "A mode that involves transit with fixed schedules",
                          "type": "string",
                          "enum": [
                            "TRAM",
                            "SUBWAY",
                            "RAIL",
                            "BUS",
                            "FERRY",
                            "TRANSIT",
                            "TRAIN",
                            "AEROPLANE"
                          ]
                        },
                        {
                          "description": "A mode that is available on-demand for your personal use",
                          "type": "string",
                          "enum": [
                            "CAR",
                            "TAXI",
                            "CABLE_CAR",
                            "GONDOLA",
                            "FUNICULAR",
                            "BUSISH",
                            "TRAINISH"
                          ]
                        }
                      ]
                    },
                    "departureDelay": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "arrivalDelay": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "distance": {
                      "type": "number",
                      "minimum": 0
                    },
                    "route": {
                      "type": "string",
                      "minLength": 1
                    },
                    "routeShortName": {
                      "type": "string",
                      "minLength": 1
                    },
                    "routeLongName": {
                      "type": "string",
                      "minLength": 1
                    },
                    "agencyId": {
                      "type": "string",
                      "minLength": 2
                    },
                    "legGeometry": {
                      "type": "object",
                      "description": "Google encoded polyline, see: https://developers.google.com/maps/documentation/utilities/polylinealgorithm",
                      "properties": {
                        "points": {
                          "type": "string",
                          "minLength": 3,
                          "pattern": "^([\\x5F-\\x7E]*[\\x3F-\\x5E])+$"
                        }
                      },
                      "required": [
                        "points"
                      ]
                    }
                  },
                  "required": [
                    "from",
                    "to",
                    "mode",
                    "startTime",
                    "endTime",
                    "legGeometry"
                  ],
                  "additionalProperties": true
                },
                {
                  "type": "object",
                  "additionalProperties": true,
                  "properties": {
                    "startTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "endTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "mode": {
                      "description": "A mode that only involves waiting in the current location",
                      "type": "string",
                      "enum": [
                        "WAIT"
                      ]
                    }
                  },
                  "required": [
                    "mode",
                    "startTime",
                    "endTime"
                  ]
                },
                {
                  "type": "object",
                  "additionalProperties": true,
                  "properties": {
                    "startTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "endTime": {
                      "type": "integer",
                      "maximum": 9007199254740991,
                      "minimum": 1451606400
                    },
                    "mode": {
                      "description": "A mode that involves changing transports",
                      "type": "string",
                      "enum": [
                        "TRANSFER",
                        "LEG_SWITCH"
                      ]
                    }
                  },
                  "required": [
                    "mode",
                    "startTime",
                    "endTime"
                  ]
                }
              ]
            }
          }
        },
        "definitions": {
          "leg": {
            "properties": {
              "id": {
                "type": "string",
                "pattern": "^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"
              }
            },
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "signature": {
                    "type": "string"
                  },
                  "state": {
                    "type": "string",
                    "enum": [
                      "START",
                      "PLANNED",
                      "PAID",
                      "ACTIVATED",
                      "CANCELLED",
                      "CANCELLED_WITH_ERRORS",
                      "FINISHED"
                    ]
                  },
                  "from": {
                    "type": "object",
                    "additionalProperties": true,
                    "allOf": [
                      {
                        "type": "object",
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "lat": {
                                "type": "number",
                                "minimum": -90,
                                "maximum": 90
                              },
                              "lon": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                              }
                            }
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "stopId": {
                            "type": "string",
                            "minLength": 1
                          },
                          "stopCode": {
                            "type": "string",
                            "minLength": 1
                          }
                        }
                      }
                    ],
                    "required": [
                      "lat",
                      "lon"
                    ]
                  },
                  "to": {
                    "type": "object",
                    "additionalProperties": true,
                    "allOf": [
                      {
                        "type": "object",
                        "allOf": [
                          {
                            "type": "object",
                            "properties": {
                              "lat": {
                                "type": "number",
                                "minimum": -90,
                                "maximum": 90
                              },
                              "lon": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                              }
                            }
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "stopId": {
                            "type": "string",
                            "minLength": 1
                          },
                          "stopCode": {
                            "type": "string",
                            "minLength": 1
                          }
                        }
                      }
                    ],
                    "required": [
                      "lat",
                      "lon"
                    ]
                  },
                  "startTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "endTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "mode": {
                    "anyOf": [
                      {
                        "description": "A mode that involves using your personal vehicle or legs",
                        "type": "string",
                        "enum": [
                          "WALK",
                          "BICYCLE",
                          "CAR"
                        ]
                      },
                      {
                        "description": "A mode that involves transit with fixed schedules",
                        "type": "string",
                        "enum": [
                          "TRAM",
                          "SUBWAY",
                          "RAIL",
                          "BUS",
                          "FERRY",
                          "TRANSIT",
                          "TRAIN",
                          "AEROPLANE"
                        ]
                      },
                      {
                        "description": "A mode that is available on-demand for your personal use",
                        "type": "string",
                        "enum": [
                          "CAR",
                          "TAXI",
                          "CABLE_CAR",
                          "GONDOLA",
                          "FUNICULAR",
                          "BUSISH",
                          "TRAINISH"
                        ]
                      }
                    ]
                  },
                  "departureDelay": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "arrivalDelay": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "distance": {
                    "type": "number",
                    "minimum": 0
                  },
                  "route": {
                    "type": "string",
                    "minLength": 1
                  },
                  "routeShortName": {
                    "type": "string",
                    "minLength": 1
                  },
                  "routeLongName": {
                    "type": "string",
                    "minLength": 1
                  },
                  "agencyId": {
                    "type": "string",
                    "minLength": 2
                  },
                  "legGeometry": {
                    "type": "object",
                    "description": "Google encoded polyline, see: https://developers.google.com/maps/documentation/utilities/polylinealgorithm",
                    "properties": {
                      "points": {
                        "type": "string",
                        "minLength": 3,
                        "pattern": "^([\\x5F-\\x7E]*[\\x3F-\\x5E])+$"
                      }
                    },
                    "required": [
                      "points"
                    ]
                  }
                },
                "required": [
                  "from",
                  "to",
                  "mode",
                  "startTime",
                  "endTime",
                  "legGeometry"
                ],
                "additionalProperties": true
              },
              {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "startTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "endTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "mode": {
                    "description": "A mode that only involves waiting in the current location",
                    "type": "string",
                    "enum": [
                      "WAIT"
                    ]
                  }
                },
                "required": [
                  "mode",
                  "startTime",
                  "endTime"
                ]
              },
              {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "startTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "endTime": {
                    "type": "integer",
                    "maximum": 9007199254740991,
                    "minimum": 1451606400
                  },
                  "mode": {
                    "description": "A mode that involves changing transports",
                    "type": "string",
                    "enum": [
                      "TRANSFER",
                      "LEG_SWITCH"
                    ]
                  }
                },
                "required": [
                  "mode",
                  "startTime",
                  "endTime"
                ]
              }
            ]
          }
        }
      }
    },
    "maas": {
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": [
    "itineraries"
  ],
  "additionalProperties": false
}