{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://api.maas.global/v1/bookings-update/response.json","description":"Response schema for bookings update","type":"object","properties":{"booking":{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://api.maas.global/v1/units","description":"MaaS Booking schema","allOf":[{"type":"object","description":"The base booking object with all fields, to be inherited","properties":{"id":{"type":"string","pattern":"^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"},"tspId":{"type":"string","maxLength":256},"state":{"description":"The life-cycle state of the booking","type":"string","enum":["START","PENDING","RESERVED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","EXPIRED","RECONCILING","RESOLVED","REJECTED"]},"leg":{"anyOf":[{"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]},{"type":"object","description":"A subset of the standard leg for MAAS_PERSONAL","properties":{"mode":{"type":"string","enum":["MAAS_PERSONAL"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"from":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}},"to":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}},"additionalProperties":true,"required":["mode","startTime","endTime"]}]},"meta":{"type":"object","description":"TSP/mode-specific additional information. The TSP adapter should set MODE_{mode} with defined data, otherwise 'meta' can be used freely.","properties":{"MODE_WALK":{"type":"object"},"MODE_BICYCLE":{"type":"object"},"MODE_CAR":{"properties":{"name":{"type":"string"},"description":{"type":"string"},"image":{"type":"string","format":"url"},"car":{"type":"object","properties":{"passengers":{"type":"integer"}}}},"required":["name","description","image"]},"MODE_TRAM":{"type":"object"},"MODE_SUBWAY":{"type":"object"},"MODE_RAIL":{"type":"object"},"MODE_BUS":{"type":"object"},"MODE_FERRY":{"type":"object"},"MODE_CABLE_CAR":{"type":"object"},"MODE_GONDOLA":{"type":"object"},"MODE_FUNICULAR":{"type":"object"},"MODE_TRANSIT":{"type":"object"},"MODE_TRAIN":{"type":"object"},"MODE_TRAINISH":{"type":"object"},"MODE_BUSISH":{"type":"object"},"MODE_LEG_SWITCH":{"type":"object"},"MODE_MAAS_TRIP":{"type":"object"},"MODE_MAAS_PERSONAL":{"type":"object"},"MODE_TAXI":{"type":"object"}},"additionalProperties":true},"terms":{"description":"MaaS booking terms and condition for its business engine","type":"object","properties":{"price":{"type":"object","required":["amount","currency"],"properties":{"amount":{"type":"number","minimum":0},"currency":{"enum":["EUR"]}}}}},"customer":{"type":"object","description":"Booking customer information","properties":{"firstName":{"description":"First name of the customer (e.g. John)","type":"string"},"lastName":{"description":"Last name of the customer (e.g. Doe)","type":"string"},"phone":{"description":"Phone number that the customer may be reached from","type":"string"},"email":{"description":"Email address that the customer may be reached from","type":"string"}},"required":["firstName","lastName","phone","email"],"additionalProperties":false}},"additionalProperties":false},{"required":["id","tspId","state","leg","meta","terms","customer"]}],"definitions":{"bookingCore":{"type":"object","description":"The base booking object with all fields, to be inherited","properties":{"id":{"type":"string","pattern":"^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"},"tspId":{"type":"string","maxLength":256},"state":{"description":"The life-cycle state of the booking","type":"string","enum":["START","PENDING","RESERVED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","EXPIRED","RECONCILING","RESOLVED","REJECTED"]},"leg":{"anyOf":[{"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]},{"type":"object","description":"A subset of the standard leg for MAAS_PERSONAL","properties":{"mode":{"type":"string","enum":["MAAS_PERSONAL"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"from":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}},"to":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}},"additionalProperties":true,"required":["mode","startTime","endTime"]}]},"meta":{"type":"object","description":"TSP/mode-specific additional information. The TSP adapter should set MODE_{mode} with defined data, otherwise 'meta' can be used freely.","properties":{"MODE_WALK":{"type":"object"},"MODE_BICYCLE":{"type":"object"},"MODE_CAR":{"properties":{"name":{"type":"string"},"description":{"type":"string"},"image":{"type":"string","format":"url"},"car":{"type":"object","properties":{"passengers":{"type":"integer"}}}},"required":["name","description","image"]},"MODE_TRAM":{"type":"object"},"MODE_SUBWAY":{"type":"object"},"MODE_RAIL":{"type":"object"},"MODE_BUS":{"type":"object"},"MODE_FERRY":{"type":"object"},"MODE_CABLE_CAR":{"type":"object"},"MODE_GONDOLA":{"type":"object"},"MODE_FUNICULAR":{"type":"object"},"MODE_TRANSIT":{"type":"object"},"MODE_TRAIN":{"type":"object"},"MODE_TRAINISH":{"type":"object"},"MODE_BUSISH":{"type":"object"},"MODE_LEG_SWITCH":{"type":"object"},"MODE_MAAS_TRIP":{"type":"object"},"MODE_MAAS_PERSONAL":{"type":"object"},"MODE_TAXI":{"type":"object"}},"additionalProperties":true},"terms":{"description":"MaaS booking terms and condition for its business engine","type":"object","properties":{"price":{"type":"object","required":["amount","currency"],"properties":{"amount":{"type":"number","minimum":0},"currency":{"enum":["EUR"]}}}}},"customer":{"type":"object","description":"Booking customer information","properties":{"firstName":{"description":"First name of the customer (e.g. John)","type":"string"},"lastName":{"description":"Last name of the customer (e.g. Doe)","type":"string"},"phone":{"description":"Phone number that the customer may be reached from","type":"string"},"email":{"description":"Email address that the customer may be reached from","type":"string"}},"required":["firstName","lastName","phone","email"],"additionalProperties":false}},"additionalProperties":false},"customer":{"type":"object","description":"Booking customer information","properties":{"firstName":{"description":"First name of the customer (e.g. John)","type":"string"},"lastName":{"description":"Last name of the customer (e.g. Doe)","type":"string"},"phone":{"description":"Phone number that the customer may be reached from","type":"string"},"email":{"description":"Email address that the customer may be reached from","type":"string"}},"required":["firstName","lastName","phone","email"],"additionalProperties":false},"leg":{"anyOf":[{"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]},{"type":"object","description":"A subset of the standard leg for MAAS_PERSONAL","properties":{"mode":{"type":"string","enum":["MAAS_PERSONAL"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"from":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}},"to":{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}},"additionalProperties":true,"required":["mode","startTime","endTime"]}]},"state":{"description":"The life-cycle state of the booking","type":"string","enum":["START","PENDING","RESERVED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","EXPIRED","RECONCILING","RESOLVED","REJECTED"]},"meta":{"type":"object","description":"TSP/mode-specific additional information. The TSP adapter should set MODE_{mode} with defined data, otherwise 'meta' can be used freely.","properties":{"MODE_WALK":{"type":"object"},"MODE_BICYCLE":{"type":"object"},"MODE_CAR":{"properties":{"name":{"type":"string"},"description":{"type":"string"},"image":{"type":"string","format":"url"},"car":{"type":"object","properties":{"passengers":{"type":"integer"}}}},"required":["name","description","image"]},"MODE_TRAM":{"type":"object"},"MODE_SUBWAY":{"type":"object"},"MODE_RAIL":{"type":"object"},"MODE_BUS":{"type":"object"},"MODE_FERRY":{"type":"object"},"MODE_CABLE_CAR":{"type":"object"},"MODE_GONDOLA":{"type":"object"},"MODE_FUNICULAR":{"type":"object"},"MODE_TRANSIT":{"type":"object"},"MODE_TRAIN":{"type":"object"},"MODE_TRAINISH":{"type":"object"},"MODE_BUSISH":{"type":"object"},"MODE_LEG_SWITCH":{"type":"object"},"MODE_MAAS_TRIP":{"type":"object"},"MODE_MAAS_PERSONAL":{"type":"object"},"MODE_TAXI":{"type":"object"}},"additionalProperties":true},"terms":{"description":"MaaS booking terms and condition for its business engine","type":"object","properties":{"price":{"type":"object","required":["amount","currency"],"properties":{"amount":{"type":"number","minimum":0},"currency":{"enum":["EUR"]}}}}},"token":{"description":"The validity token (such as booking ID, travel ticket etc.) that MaaS clients will display to validate the trip when starting the leg.","properties":{"validityDuration":{"description":"The rules that MaaS will interpret to schedule, re-validate or cancel the booking.","type":"object","properties":{"from":{"description":"The starting time from which the ticket is valid","type":"integer","maximum":9007199254740991,"minimum":1451606400},"to":{"description":"The finishing time the ticket is valid for","type":"integer","maximum":9007199254740991,"minimum":1451606400}}},"meta":{"description":"Arbitrary metadata the TSP may pass along the ticket to the client (e.g. a booking code, base64 encoded binary)","type":"object"}}},"tspId":{"type":"string","maxLength":256}}},"maas":{"type":"object","additionalProperties":true}},"required":["itinerary"],"additionalProperties":false}