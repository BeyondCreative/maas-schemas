{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://api.maas.global/booking-create/request","description":"Request schema for creating a booking through a TSP adapter","type":"object","properties":{"leg":{"anyOf":[{"type":"object","additionalProperties":true,"properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"$ref":"#/properties/leg/anyOf/0/properties/from"},"startTime":{"$ref":"#/properties/leg/anyOf/1/properties/startTime"},"endTime":{"$ref":"#/properties/leg/anyOf/1/properties/startTime"},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string"},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"$ref":"#/properties/leg/anyOf/1/properties/startTime"},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"$ref":"#/properties/leg/anyOf/1/properties/startTime"},"endTime":{"$ref":"#/properties/leg/anyOf/1/properties/startTime"},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]},"meta":{"type":"object","description":"The original metadata from the TSP provided in options should be included"},"customer":{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://api.maas.global/v1/units","description":"MaaS Customer object schema that will be passed along with the booking","type":"object","required":["firstName","lastName","phone","email"],"properties":{"title":{"type":"string","description":"Customer title","enum":["mr","ms","mrs","company"]},"firstName":{"description":"First name of the customer (e.g. John)","type":"string"},"lastName":{"description":"Last name of the customer (e.g. Doe)","type":"string"},"phone":{"description":"Phone number that the customer may be reached from","type":"string"},"email":{"description":"Email address that the customer may be reached from","type":"string"}}}},"required":["leg","meta","customer"],"additionalProperties":false}