{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://api.maas.global/v1/internal/itinerary","description":"OpenTripPlanner itinerary, augmented with leg bookings per leg","anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"waitingTime":{"type":"integer","minimum":0},"fare":{"type":"object","properties":{"co2":{"type":"number"},"points":{"anyOf":[{"type":"number"},{"type":"null"}]}},"required":["co2","points"]},"legs":{"type":"array","minItems":0,"items":[{"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]}]}},"required":["startTime","endTime","legs"]}],"properties":{"id":{"type":"string","pattern":"^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"},"customer":{"type":"string","pattern":"^[aepus]{2}-[\\w]{4}-\\d:[a-f\\d]{8}(-[a-f\\d]{4}){3}-[a-f\\d]{12}$"},"legs":{"type":"array","minItems":0,"items":{"properties":{"id":{"type":"string","pattern":"^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"}},"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]}}},"definitions":{"leg":{"properties":{"id":{"type":"string","pattern":"^[A-Fa-f0-9]{8}(-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}$"}},"anyOf":[{"type":"object","properties":{"signature":{"type":"string"},"from":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"to":{"type":"object","additionalProperties":true,"allOf":[{"type":"object","allOf":[{"type":"object","properties":{"lat":{"type":"number","minimum":-90,"maximum":90},"lon":{"type":"number","minimum":-180,"maximum":180}}}],"properties":{"name":{"type":"string","address":{"type":"string"}}}}],"properties":{"stopId":{"type":"string"},"stopCode":{"type":"string"}},"required":["lat","lon"]},"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WALK","BICYCLE","CAR","TRAM","SUBWAY","RAIL","BUS","FERRY","CABLE_CAR","GONDOLA","FUNICULAR","TRANSIT","TRAIN","TRAINISH","BUSISH","LEG_SWITCH","MAAS_TRIP","MAAS_PERSONAL","TAXI"]},"departureDelay":{"type":"integer","minimum":0},"arrivalDelay":{"type":"integer","minimum":0},"distance":{"type":"number","minimum":0},"state":{"type":"string","enum":["START","PLANNED","PAID","ACTIVATED","CANCELLED","CANCELLED_WITH_ERRORS","FINISHED"]},"route":{"type":"string"},"routeShortName":{"type":"string"},"routeLongName":{"type":"string"},"agencyId":{"type":"string","minLength":2},"legGeometry":{"type":"object","additionalProperties":true,"properties":{"points":{"type":"string","minLength":1}}}},"required":["from","to","mode","startTime","endTime"],"additionalProperties":true},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["WAIT"]}},"required":["mode","startTime","endTime"]},{"type":"object","additionalProperties":true,"properties":{"startTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"endTime":{"type":"integer","maximum":9007199254740991,"minimum":1451606400},"mode":{"type":"string","enum":["TRANSFER"]}},"required":["mode","startTime","endTime"]}]}}}